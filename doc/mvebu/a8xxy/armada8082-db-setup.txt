Armada-8082 Development Board Setup
===================================

The Armada 8082 Development Board is a configurable board,
designed to test several combinations of SoC configurations.
U-Boot supports a defined set of those configurations via different device tree files.

.. _fig_a8xxy-db:

.. figure:: /images/a8xxy-db.*
   :align: center

   Armada-8082 Development Board

This document describes the board modifications required to setup each configuration and the
interfaces supported (or disabled in each one).

To switch board configuration:
1. Modify HW board settings according to the instructions in the "Board Setup" section below.
2. Modify the Device tree file used by U-BOOT during compilation:
   mvebu_db_armada8kp_defconfig		 - Choose Armada 8k plus general defconfig
   export DEVICE_TREE=<device_tree_name> - Choose specific device-tree
3. Two DIMM's are mandatory in order to reach expected performance.

Note:
Booting Linux requires using the same Device Tree configuration as used in U-Boot.

Board Setup Options
-------------------

+---------------+-----------------------+-----------------------+
|		| 1: A			|2: B                   |
+===============+=======================+=======================+
|Device tree	| armada-8082-db.dtb	| armada-8082-db-B.dtb  |
+-----+---------+-----------------------+-----------------------+
| CP0 | SW1:1	| ON			| ON			|
|     +---------+-----------------------+-----------------------+
|     | SW1:2	| ON			| ON			|
|     +---------+-----------------------+-----------------------+
|     | SW1:3	| OFF			| OFF			|
|     +---------+-----------------------+-----------------------+
|     | SW1:4	| ON			| ON			|
|     +---------+-----------------------+-----------------------+
|     | SW1:5	| OFF			| OFF			|
|     +---------+-----------------------+-----------------------+
|     | SW1:6	| ON/OFF		| ON/OFF		|
|     +---------+-----------------------+-----------------------+
|     | SW1:7	| ON/OFF		| ON/OFF		|
|     +---------+-----------------------+-----------------------+
|     | SW1:8	| ON/OFF		| ON/OFF		|
+-----+---------+-----------------------+-----------------------+

DPR Setting
~~~~~~~~~~~

+-----------------------------------------------+---------------+---------------+
|						| 1: A		|2: B           |
+===============================================+===============+===============+
| Main board                            	| DPR 37-40, 42,| DPR 37-40, 42,|
|                                               | 46, 48-51 =	| 46, 48-51 =	|
|                                           	|       2-3     |        1-2    |
|                                               | DPR 170 = OUT | DPR 170 = IN  |
|                                           	| DPR 173 = IN  | DPR 173 = OUT |
+-----------------------------------------------+---------------+---------------+
| Serdes CP0 site module: SLM1521-V2		| DPR 2-5 = 1-2	| DPR 2-5 = 1-2	|
+-----------------------------------------------+---------------+---------------+

The tables below summarizes the interface configuration of each setup


SerDes Configurations
~~~~~~~~~~~~~~~~~~~~~

+---------------+---------------+---------------+
| CP0 Lane	| 1: A		| 2: B		|
+===============+===============+===============+
| 0		| PCIe0 (x4)	| PCIe0 (x4)	|
+---------------+---------------+---------------+
| 1		| PCIe0	(x4)	| PCIe0 (x4)	|
+---------------+---------------+---------------+
| 2		| PCIe0	(x4)	| PCIe0 (x4)	|
+---------------+---------------+---------------+
| 3		| PCIe0	(x4)	| PCIe0 (x4)	|
+---------------+---------------+---------------+
| 4		| SFI (10G)	| SFI (10G)	|
+---------------+---------------+---------------+
| 5		| SATA1		| SATA1		|
+---------------+---------------+---------------+

- USB2_H0 (UTMI only)
- USB2_H1 (UTMI & USB3 SerDes)

+---------------+---------------+---------------+
| CP1 Lane	| 1: A		| 2: B		|
+===============+===============+===============+
| 0		| PCIe0 (x4)	| PCIe0 (x4)	|
+---------------+---------------+---------------+
| 1		| PCIe0	(x4)	| PCIe0 (x4)	|
+---------------+---------------+---------------+
| 2		| PCIe0	(x4)	| PCIe0 (x4)	|
+---------------+---------------+---------------+
| 3		| PCIe0	(x4)	| PCIe0 (x4)	|
+---------------+---------------+---------------+
| 4		| SFI (10G)	| SFI (10G)	|
+---------------+---------------+---------------+
| 5		| SATA1		| SATA1		|
+---------------+---------------+---------------+

Multi-purpose pin configurations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

+---------------+---------------+---------------+
| AP810 pin	| 1: A		| 2: B		|
+===============+===============+===============+
|    AP0-SDIO	| [13-14]	| [13-14]	|
+---------------+---------------+---------------+
|    AP0-MMC	| [0-5],[12] 	| [0-10],[12,14]||
+---------------+---------------+---------------+
|    AP0-SPI0	| [6-10]	| N/C		|
+---------------+---------------+---------------+
|    AP0-UART0	| [11,20]	| [11,20]	|
+---------------+---------------+---------------+
|    AP0-I2C0	| [18-19]	| [18-19]	|
+---------------+---------------+---------------+

+---------------+---------------+---------------+
| CP0 pin	| 1: A		| 2: B		|
+===============+===============+===============+
|   CP0-RGMII0	| [0-11]	| [0-11]	|
+---------------+---------------+---------------+
|   CP0-SPI1	| [13-16]	| [13-16]	|
+---------------+---------------+---------------+
|   CP0-SATA1	| [28]		| [28]		|
+---------------+---------------+---------------+
|   CP0-UART0	| [29-30]	| [29-30]	|
+---------------+---------------+---------------+
|   CP0-SMI	| [32,24]	| [32,24]	|
+---------------+---------------+---------------+
|   CP0-XMDIO	| [35-36]	| [35-36]	|
+---------------+---------------+---------------+
|   CP0-TWSI	| [37-38]	| [37-38]	|
+---------------+---------------+---------------+
|   CP0-UART1	| [40-41]	| [40-41]	|
+---------------+---------------+---------------+
|   CP0-RGMII1	| [44-55]	| [44-55]	|
+---------------+---------------+---------------+
|   CP0-SD	| [56-61]	| [56-61]	|
+---------------+---------------+---------------+
|   CP0-GPIO	| [62]		| [62]		|
+---------------+---------------+---------------+

+---------------+---------------+---------------+
| CP1 pin	| 1: A		| 2: B		|
+===============+===============+===============+
|   CP1-SPI1	| [13-16]	| [13-16]	|
+---------------+---------------+---------------+
|   CP1-I2C0	| [37-38]	| [37-38]	|
+---------------+---------------+---------------+

Network configuration
~~~~~~~~~~~~~~~~~~~~~

Setup 1 (A):

+---------------+-------+---------------+---------------+-------------------------------+
| Interface	| CP#	| PPv2 Port	| GMAC Port	| Board Interface		|
+===============+=======+===============+===============+===============================+
| eth0		| 0	| 0		| 0		| 10G (Lane 4 connected to SFP)	|
+---------------+-------+---------------+---------------+-------------------------------+
| eth1		| 0	| 1		| 2		| RGMII0			|
+---------------+-------+---------------+---------------+-------------------------------+
| eth2		| 0	| 2		| 3		| RGMII1			|
+---------------+-------+---------------+---------------+-------------------------------+
| eth3		| 1	| 3		| 0		| 10G (Lane 4 connected to SFP)	|
+---------------+-------+---------------+---------------+-------------------------------+

Setup 2 (B):

+---------------+-------+---------------+---------------+-------------------------------+
| Interface	| CP#	| PPv2 Port	| GMAC Port	| Board Interface		|
+===============+=======+===============+===============+===============================+
| eth0		| 0	| 0		| 0		| 10G (Lane 4 connected to SFP)	|
+---------------+-------+---------------+---------------+-------------------------------+
| eth1		| 0	| 1		| 2		| RGMII0			|
+---------------+-------+---------------+---------------+-------------------------------+
| eth2		| 0	| 2		| 3		| RGMII1			|
+---------------+-------+---------------+---------------+-------------------------------+
| eth3		| 1	| 3		| 0		| 10G (Lane 4 connected to SFP)	|
+---------------+-------+---------------+---------------+-------------------------------+


Notes:
	- eth0/1/2/3 may in fact be higher numbers, if prior eth_x interfaces already exist.
